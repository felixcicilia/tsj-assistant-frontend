<!-- src/app.html -->
<div class="tsj-shell">
  <div class="tsj-shell-inner container-fluid px-3 px-lg-2">
    <!-- ▓▓ TOPBAR ▓▓ -->
    <header class="tsj-topbar d-flex align-items-center justify-content-between">
      <div class="tsj-topbar-left d-flex align-items-center gap-3">
        <span class="tsj-app-name">TSJ Assistant</span>

        <!-- Navegación principal (solo si está logueado) -->
        @if (auth.isLoggedIn()) {
          <nav class="tsj-topbar-nav d-none d-sm-flex align-items-center gap-2">
            <a
              routerLink="/chat"
              routerLinkActive="tsj-topbar-link--active"
              class="tsj-topbar-link"
            >
              Chat
            </a>

            <a
              routerLink="/usuarios"
              routerLinkActive="tsj-topbar-link--active"
              class="tsj-topbar-link"
            >
              Usuarios
            </a>
          </nav>
        }
      </div>

      <div class="tsj-topbar-right" *ngIf="auth.isLoggedIn()">
        <span class="tsj-user-email me-2">
          {{ auth.currentUser?.email }}
        </span>

        <button class="tsj-logout-btn" (click)="auth.logout()">
          Cerrar sesión
        </button>
      </div>
    </header>

    <!-- ▓▓ MAIN ▓▓ -->
    <main class="tsj-shell-main">
      <!-- Estado NO autenticado: solo login centrado -->
      @if (!auth.isLoggedIn()) {
        <section
          class="tsj-main-login d-flex align-items-center justify-content-center w-100"
        >
          <div class="row justify-content-center w-100">
            <div class="col-lg-5 col-md-7 col-sm-10">
              <div class="card tsj-login-card border-0 p-4">
                <h5 class="fw-semibold mb-2">Acceso al asistente jurídico</h5>
                <p class="text-muted small mb-3">
                  Use sus credenciales del sistema interno del TSJ para iniciar sesión.
                </p>

                <app-login></app-login>
              </div>
            </div>
          </div>
        </section>
      }
      @else {
        <!-- Estado autenticado: layout enrutado (chat, usuarios, etc.) -->
        <section class="tsj-main-layout">
          <div class="tsj-main-content card border-0 tsj-main-card">
            <!-- Aquí Angular pinta CHAT, USUARIOS, etc. según la ruta -->
            <router-outlet></router-outlet>
          </div>
        </section>
      }
    </main>
  </div>
</div>