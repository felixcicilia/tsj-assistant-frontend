<!-- src/app.html -->
<div class="tsj-shell">
  <div class="container py-3 py-lg-4">
    <!-- HEADER -->
    <header
      class="d-flex flex-column flex-lg-row justify-content-between align-items-start align-items-lg-center mb-3 gap-3"
    >
      <div>
        <p class="tsj-header-kicker mb-1">SISTEMA INTERNO TSJ</p>
        <h1 class="tsj-header-title">TSJ Assistant</h1>
        <p class="tsj-header-subtitle mb-0">
          Bienvenido, {{ auth.currentUser?.name || 'usuario' }}. Puede continuar sus consultas con
          el asistente jurídico.
        </p>
      </div>

      @if (auth.isLoggedIn()) {
      <div class="tsj-header-user text-end small">
        <div class="fw-semibold text-dark">
          {{ auth.currentUser?.name }}
        </div>
        <div class="text-muted">
          {{ auth.currentUser?.email }}
        </div>
        <div class="text-muted mb-2">
          {{ auth.currentUser?.role }}
        </div>

        <button
          type="button"
          class="btn btn-outline-secondary btn-sm rounded-pill px-3"
          (click)="onLogout()"
        >
          Cerrar sesión
        </button>
      </div>
      } @else {
      <div class="text-muted small text-end">No ha iniciado sesión</div>
      }
    </header>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="tsj-main-section">
      @if (!auth.isLoggedIn()) {
      <!-- LOGIN -->
      <section class="row justify-content-center tsj-main-login">
        <div class="col-md-8 col-lg-6">
          <div class="card shadow-sm border-0 rounded-4">
            <div class="card-body p-4">
              <h5 class="fw-semibold mb-2">Acceso al asistente jurídico</h5>
              <p class="text-muted small mb-3">
                Use sus credenciales del sistema interno del TSJ para iniciar sesión.
              </p>

              <app-login></app-login>
            </div>
          </div>
        </div>
      </section>
      } @else {
      <!-- CHAT -->
      <app-chat></app-chat>
      }
    </main>
  </div>
</div>
